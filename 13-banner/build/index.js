!function(e){var t={};function l(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=t,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=3)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.regeneratorRuntime}()},function(e,t){function l(e,t,l,n,a,r,i){try{var s=e[r](i),o=s.value}catch(e){return void l(e)}s.done?t(o):Promise.resolve(o).then(n,a)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}},function(e,t,l){"use strict";l.r(t);var n=l(1),a=l.n(n),r=l(2),i=l.n(r),s=l(0),o=wp.i18n,c=o.__,b=(o.setLocaleData,wp.blocks.registerBlockType),u=wp.blockEditor,h=u.InnerBlocks,d=u.InspectorControls,g=u.InspectorAdvancedControls,m=u.MediaUpload,p=wp.components,v=p.PanelBody,f=(p.TextControl,p.ToggleControl),x=p.SelectControl,k=p.Button,w=(p.SVG,p.Path,p.RadioControl),y=wp.data.withSelect,j=function(e,t,l,n,a,r,i,s,o,c,b){var u=[];return u.push("banner-"+e+"-"+t),l&&u.push("below-navbar-content"),n&&u.push("bg-"+n),a&&u.push("bg-"+a),r&&u.push("bg-"+r),i&&(u.push("d-flex"),u.push("align-items-"+i)),s&&s===o?u.push("my-"+s):(s&&u.push("mt-"+s),o&&u.push("mb-"+o)),c&&c===b?u.push("py-"+c):(c&&u.push("pt-"+c),b&&u.push("pb-"+b)),u.join(" ")},z=function(e){var t=e.split("."),l=t[t.length-1];return t.pop(),{trunc:t.join("."),extension:l}},E=function(e){var t=z(e).trunc;return t.lastIndexOf("-scaled")===t.length-7},O=function(e){var t=z(e);return t.trunc.substring(0,t.trunc.length-7)+"."+t.extension},S=function(e){var t,l,n=e.originalWidth/e.originalHeight,a=z(e.url),r=a.extension,i=a.trunc,s=(t=i.split("-"),l=t[t.length-1].split("x"),t.pop(),{width:l[0],height:l[1],withoutSizesTrunc:t.join("-")}),o=s.width,c=s.withoutSizesTrunc,b=[];return e.scaleList.forEach((function(t,l){var a=Math.round(o*t);if(a<=e.originalWidth){var i=Math.round(a/n),s=c+"-"+a+"x"+i+"."+r;b.push({url:s,width:a,height:i})}})),b},C=function(e){return new Promise((function(t,l){var n=document.createElement("img");n.onload=function(){t({width:n.width,height:n.height}),n.remove},n.onerror=function(t){l('Error on loading image "'+e+'"',t)},n.src=e,document.body.appendChild(n)}))},B=function(e){return new Promise((function(t,l){var n=new XMLHttpRequest;n.open("HEAD",e,!0),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?t(!0):t(!1))},n.send(null)}))};b("bsx-blocks/banner",{title:c("BSX Banner","bsx-blocks"),icon:"category",category:"layout",attributes:{templateName:{type:"string",default:"empty"},belowNavbar:{type:"boolean",default:!1},imgId:{type:"number"},imgSizes:{type:"array",default:[]},imgSizeIndex:{type:"string",default:"6"},url:{type:"string"},bannerType:{type:"string",default:"vh"},bannerSize:{type:"string",default:"2"},bgAttachment:{type:"string",default:"fixed"},bgSize:{type:"string",default:"cover"},bgPosition:{type:"string",default:"c"},alignItems:{type:"string",default:"center"},marginBefore:{type:"string",default:""},marginAfter:{type:"string",default:""},paddingBefore:{type:"string",default:""},paddingAfter:{type:"string",default:""}},edit:y((function(e,t){var l=t.clientId,n=e("core/block-editor"),a=n.getBlocksByClientId;n.getBlockAttributes;return{children:a(l)[0]?a(l)[0].innerBlocks:[]}}))((function(e){e.className;var t=e.attributes,l=t.templateName,n=t.belowNavbar,r=t.imgId,o=t.imgSizes,b=t.imgSizeIndex,u=t.url,p=t.bannerType,y=t.bannerSize,z=t.bgAttachment,I=t.bgSize,A=t.bgPosition,P=t.alignItems,N=t.marginBefore,M=t.marginAfter,T=t.paddingBefore,H=t.paddingAfter,V=e.setAttributes,_=(e.isSelected,e.children,[{name:"empty",title:c("Empty","bsx-blocks"),icon:Object(s.createElement)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",focusable:"false"},Object(s.createElement)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.58 26.28c0-.600003.1499985-1.099998.45-1.5.3000015-.400002.7433304-.8399976 1.33-1.32.5600028-.4533356.9833319-.8699981 1.27-1.25s.43-.8433306.43-1.39c0-.5466694-.1733316-1.0566643-.52-1.53s-.986662-.71-1.92-.71c-1.1066722 0-1.8533314.2766639-2.24.83-.3866686.5533361-.58 1.1766632-.58 1.87 0 .1466674.0033333.2666662.01.36.0066667.0933338.01.1533332.01.18h-1.78c-.0133334-.0533336-.0266666-.146666-.04-.28-.0133334-.133334-.02-.2733326-.02-.42 0-.7733372.1766649-1.4666636.53-2.08.3533351-.6133364.8899964-1.0999982 1.61-1.46.7200036-.3600018 1.5999948-.54 2.64-.54 1.2133394 0 2.2033295.3233301 2.97.97s1.15 1.5099946 1.15 2.59c0 .7066702-.1033323 1.3033309-.31 1.79-.2066677.4866691-.4533319.8799985-.74 1.18-.2866681.3000015-.6566644.6233316-1.11.97-.4800024.3866686-.8333322.7166653-1.06.99-.2266678.2733347-.34.6233312-.34 1.05v.82h-1.74zm-.14 2.56h2V31h-2zM39 12c1.1046 0 2 .8954 2 2v20c0 1.1046-.8954 2-2 2H9c-1.10457 0-2-.8954-2-2V14c0-1.1046.89543-2 2-2h30zm0 22V14H9v20h30z"})),template:[["core/paragraph",{placeholder:"Change paragraph text or delete..."}]],templateLock:!1},{name:"container-with-heading",title:c("Container with Heading","bsx-blocks"),icon:Object(s.createElement)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",focusable:"false"},Object(s.createElement)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.58 26.28c0-.600003.1499985-1.099998.45-1.5.3000015-.400002.7433304-.8399976 1.33-1.32.5600028-.4533356.9833319-.8699981 1.27-1.25s.43-.8433306.43-1.39c0-.5466694-.1733316-1.0566643-.52-1.53s-.986662-.71-1.92-.71c-1.1066722 0-1.8533314.2766639-2.24.83-.3866686.5533361-.58 1.1766632-.58 1.87 0 .1466674.0033333.2666662.01.36.0066667.0933338.01.1533332.01.18h-1.78c-.0133334-.0533336-.0266666-.146666-.04-.28-.0133334-.133334-.02-.2733326-.02-.42 0-.7733372.1766649-1.4666636.53-2.08.3533351-.6133364.8899964-1.0999982 1.61-1.46.7200036-.3600018 1.5999948-.54 2.64-.54 1.2133394 0 2.2033295.3233301 2.97.97s1.15 1.5099946 1.15 2.59c0 .7066702-.1033323 1.3033309-.31 1.79-.2066677.4866691-.4533319.8799985-.74 1.18-.2866681.3000015-.6566644.6233316-1.11.97-.4800024.3866686-.8333322.7166653-1.06.99-.2266678.2733347-.34.6233312-.34 1.05v.82h-1.74zm-.14 2.56h2V31h-2zM39 12c1.1046 0 2 .8954 2 2v20c0 1.1046-.8954 2-2 2H9c-1.10457 0-2-.8954-2-2V14c0-1.1046.89543-2 2-2h30zm0 22V14H9v20h30z"})),template:[["bsx-blocks/container",{},[["core/heading",{placeholder:"Add heading, configure heading level...",className:"display-1 text-white text-shadow-darker"}]]]],templateLock:!1}]),L=function(e){var t=_.find((function(t){return t.name===e}));return t?t.template:[]},R=L(l),W=function(e){R=L(e),V({templateName:e}),console.log("changed templateName: "+e),console.log("changed template: "+R)};function X(e){return q.apply(this,arguments)}function q(){return(q=i()(a.a.mark((function e(t){var l,n,r,i,s,o,c,u,h,d,g,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.url){e.next=40;break}if(l="",n=0,r=0,!E(t.url)){e.next=19;break}return l=O(t.url),e.prev=6,e.next=9,C(l);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error(e.t0);case 15:n=i.width||0,r=i.height||0,e.next=21;break;case 19:n=t.sizes.full.width,r=t.sizes.full.height;case 21:if(null==t.sizes.large){e.next=30;break}return h={url:t.sizes.large.url,scaleList:[.75,1.5,2],originalWidth:n,originalHeight:r},d=S(h),o=d[0]||{},c=d[1]||{},u=d[2]||{},e.next=29,Promise.all([B(o.url),B(c.url),B(u.url)]);case 29:s=e.sent;case 30:g=[],null!=t.sizes.thumbnail&&t.sizes.thumbnail.url&&g.push({url:t.sizes.thumbnail.url,width:t.sizes.thumbnail.width,height:t.sizes.thumbnail.height}),null!=t.sizes.medium&&t.sizes.medium.url&&g.push({url:t.sizes.medium.url,width:t.sizes.medium.width,height:t.sizes.medium.height}),null!=t.sizes.large&&t.sizes.large.url&&(s[0]&&g.push({url:o.url,width:o.width,height:o.height}),g.push({url:t.sizes.large.url,width:t.sizes.large.width,height:t.sizes.large.height}),s[1]&&g.push({url:c.url,width:c.width,height:c.height}),s[1]&&g.push({url:u.url,width:u.width,height:u.height})),g.push({url:t.sizes.full.url,width:t.sizes.full.width,height:t.sizes.full.height}),l&&g.push({url:l,width:n,height:r}),m=parseInt(b),b>=g.length&&(m=g.length-1),V({imgId:t.id,imgSizes:g,imgSizeIndex:m.toString(),url:g[m].url}),console.log("url: "+g[m].url);case 40:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}var D=[];o.forEach((function(e,t){D.push({value:t.toString(),label:e.width+"x"+e.height+(e.width===e.height?" "+c("(Square format)","bsx-blocks"):"")})}));var G=j(p,y,n,z,I,A,P,N,M,T,H),U={backgroundImage:"url(".concat(u,")")};return[Object(s.createElement)(d,null,Object(s.createElement)(v,{title:c("Banner Template","bsx-blocks")},Object(s.createElement)("div",{className:"bsxui-icon-text-button-list"},_.map((function(e,t){return Object(s.createElement)(k,{label:e.title,onClick:function(){W(e.name)},className:"bsxui-icon-text-button-list-item "+(l===e.name?"active":"")},Object(s.createElement)("div",{class:"bsxui-icon-text-button-list-item-icon"},e.icon),Object(s.createElement)("div",{class:"bsxui-icon-text-button-list-item-label"},e.title))})))),Object(s.createElement)(v,{title:c("Banner image","bsx-blocks")},r?Object(s.createElement)("div",{class:"bsxui-config-panel-row"},Object(s.createElement)("img",{class:"bsxui-config-panel-img",src:u,alt:"Image preview"})):Object(s.createElement)("div",{class:"bsxui-config-panel-row"},Object(s.createElement)("div",{class:"bsxui-config-panel-text"},c("– No image selected yet –","bsx-blocks"))),Object(s.createElement)("div",{class:"bsxui-config-panel-row"},Object(s.createElement)(m,{onSelect:X,allowedTypes:"image",value:r,render:function(e){var t=e.open;return Object(s.createElement)(k,{onClick:t,isSecondary:!0},c("Change / upload Image","bsx-blocks"))}})),Object(s.createElement)(w,{label:c("Image size and format","bsx-blocks"),selected:b.toString(),options:D,onChange:function(e){V({imgSizeIndex:e.toString(),url:o[e].url})}}),null!=o[b]&&null!=o[b].url&&Object(s.createElement)("div",{class:"components-base-control"},Object(s.createElement)("a",{href:o[b].url,target:"_blank"},c("Preview selected image","bsx-blocks")))),Object(s.createElement)(v,{title:c("Banner dimensions","bsx-blocks")},Object(s.createElement)(x,{label:c("Banner height type","bsx-blocks"),value:p,onChange:function(e){V({bannerType:e})},options:[{value:"vh",label:c("Viewport dependent height","bsx-blocks")},{value:"st",label:c("Static height","bsx-blocks")}],help:c("Viewport dependent height will be e.g. all viewport height or viewport height - X pixels. Static height instead depends only on the banners contents.","bsx-blocks")}),Object(s.createElement)(x,{label:c("Banner height size","bsx-blocks"),value:y,onChange:function(e){V({bannerSize:e})},options:[{value:"1",label:c("1 (biggest)","bsx-blocks")},{value:"2",label:c("2","bsx-blocks")},{value:"3",label:c("3 (smallest)","bsx-blocks")}],help:c("Choose from 1 (maximum) to 3 (minimum)","bsx-blocks")}),Object(s.createElement)(x,{label:c("Background attachement","bsx-blocks"),value:z,onChange:function(e){V({bgAttachment:e})},options:[{value:"static",label:c("static","bsx-blocks")},{value:"fixed",label:c("fixed","bsx-blocks")}]}),Object(s.createElement)(x,{label:c("Align items","bsx-blocks"),value:P,onChange:function(e){V({alignItems:e})},options:[{value:"center",label:c("center","bsx-blocks")},{value:"end",label:c("end","bsx-blocks")}]})),Object(s.createElement)(v,{title:c("Margin","bsx-blocks")},Object(s.createElement)(x,{label:c("Margin before","bsx-blocks"),value:N,onChange:function(e){V({marginBefore:e})},options:[{value:"",label:c("– unset –","bsx-blocks")},{value:"0",label:c("none (0)","bsx-blocks")},{value:"1",label:c("extra small","bsx-blocks")},{value:"2",label:c("small","bsx-blocks")},{value:"3",label:c("medium","bsx-blocks")},{value:"4",label:c("large","bsx-blocks")},{value:"5",label:c("extra large","bsx-blocks")}],help:c("Spacer before Banner","bsx-blocks")}),Object(s.createElement)(x,{label:c("Margin after","bsx-blocks"),value:M,onChange:function(e){V({marginAfter:e})},options:[{value:"",label:c("– unset –","bsx-blocks")},{value:"0",label:c("none (0)","bsx-blocks")},{value:"1",label:c("extra small","bsx-blocks")},{value:"2",label:c("small","bsx-blocks")},{value:"3",label:c("medium","bsx-blocks")},{value:"4",label:c("large","bsx-blocks")},{value:"5",label:c("extra large","bsx-blocks")}],help:c("Spacer after Banner","bsx-blocks")}))),Object(s.createElement)(g,null,Object(s.createElement)(f,{label:c("Below navbar","bsx-blocks"),checked:!!n,onChange:function(e){V({belowNavbar:e})},help:c("Enable if container starts below navbar. If enabled container has spacer top to avoid overlapping its contents by navbar.","bsx-blocks")}),Object(s.createElement)(x,{label:c("Background advanced position","bsx-blocks"),value:A,onChange:function(e){V({bgPosition:e})},options:[{value:"c",label:c("Center center","bsx-blocks")},{value:"c25",label:c("Center 25%","bsx-blocks")},{value:"c66",label:c("Center 66%","bsx-blocks")},{value:"c75",label:c("Center 75%","bsx-blocks")},{value:"ct",label:c("Center top","bsx-blocks")},{value:"rc",label:c("Right center","bsx-blocks")},{value:"33c",label:c("33% center","bsx-blocks")},{value:"80c",label:c("80% center","bsx-blocks")},{value:"66t",label:c("66% top","bsx-blocks")},{value:"66c",label:c("66% center","bsx-blocks")}]}),Object(s.createElement)(x,{label:c("Background advanced size","bsx-blocks"),value:I,onChange:function(e){V({bgSize:e})},options:[{value:"cover",label:c("Cover","bsx-blocks")},{value:"contain",label:c("Contain","bsx-blocks")},{value:"100a",label:c("100% auto","bsx-blocks")}]}),Object(s.createElement)(x,{label:c("Padding before","bsx-blocks"),value:T,onChange:function(e){V({paddingBefore:e})},options:[{value:"",label:c("– none –","bsx-blocks")},{value:"1",label:c("extra small","bsx-blocks")},{value:"2",label:c("small","bsx-blocks")},{value:"3",label:c("medium","bsx-blocks")},{value:"4",label:c("large","bsx-blocks")},{value:"5",label:c("extra large","bsx-blocks")}],help:c("Inner spacer before","bsx-blocks")}),Object(s.createElement)(x,{label:c("Padding after","bsx-blocks"),value:H,onChange:function(e){V({paddingAfter:e})},options:[{value:"",label:c("– none –","bsx-blocks")},{value:"1",label:c("extra small","bsx-blocks")},{value:"2",label:c("small","bsx-blocks")},{value:"3",label:c("medium","bsx-blocks")},{value:"4",label:c("large","bsx-blocks")},{value:"5",label:c("extra large","bsx-blocks")}],help:c("Inner spacer after","bsx-blocks")})),Object(s.createElement)("div",{className:G,style:U},!r&&Object(s.createElement)("div",{className:"bsxui-in-widget-overlay-panel bsxui-top"},Object(s.createElement)(m,{onSelect:X,allowedTypes:"image",value:r,render:function(e){var t=e.open;return Object(s.createElement)(k,{onClick:t,isSecondary:!0},c("Select / upload Image","bsx-blocks"))}})),Object(s.createElement)(h,{template:R,renderAppender:function(e){return e.length>0}?void 0:function(){return Object(s.createElement)(h.ButtonBlockAppender,null)}}))]})),save:function(e){e.className;var t=e.attributes,l=(t.templateName,t.belowNavbar),n=(t.imgId,t.imgSizes,t.imgSizeIndex,t.url),a=t.bannerType,r=t.bannerSize,i=t.bgAttachment,o=t.bgSize,c=t.bgPosition,b=t.alignItems,u=t.marginBefore,d=t.marginAfter,g=t.paddingBefore,m=t.paddingAfter,p=j(a,r,l,i,o,c,b,u,d,g,m);return Object(s.createElement)("div",{className:p,"data-fn":"lazyload","data-src":n},Object(s.createElement)("div",{class:"banner-inner"},Object(s.createElement)(h.Content,null)))}})}]);